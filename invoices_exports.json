//
// Endpoint: /invoices/exports
//
// Generated by OpenAPI_JSON_To_Single_Endpoint app.
// Author: Grzegorz Molenda.
// v.3 - 2025, All rights reserved.
// Released under MIT License.
//
  "/invoices/exports" : {
    "post" : {
      "tags" : [
        "Pobieranie faktur"
      ],
      "summary" : "Eksport paczki faktur",
      "description" : "Rozpoczyna asynchroniczny proces wyszukiwania faktur w systemie KSeF na podstawie przekazanych filtrów oraz przygotowania ich w formie zaszyfrowanej paczki.\nWymagane jest przekazanie informacji o szyfrowaniu w polu <b>Encryption</b>, które służą do zabezpieczenia przygotowanej paczki z fakturami.\nMaksymalnie można uruchomić 10 równoczesnych eksportów w zalogowanym kontekście.\n            \nSystem pobiera faktury rosnąco według daty określonej w filtrze (Invoicing, Issue, PermanentStorage) i dodaje faktury(nazwa pliku: <b>{ksefNumber}.xml</b>) do paczki aż do osiągnięcia jednego z poniższych limitów:\n* Limit liczby faktur: 10 000 sztuk\n* Limit rozmiaru danych(skompresowanych): 1GB\n\nPaczka eksportu zawiera dodatkowy plik z metadanymi faktur w formacie JSON (`_metadata.json`). Zawartość pliku to\nobiekt z tablicą <b>invoices</b>, gdzie każdy element jest obiektem typu <b>InvoiceMetadata</b>\n(taki jak zwracany przez endpoint `POST /invoices/query/metadata`).\n\n<b>Plik z metadanymi(_metadata.json) nie jest wliczany do limitów algorytmu budowania paczki</b>. \n\n`Do realizacji pobierania przyrostowego należy stosować filtrowanie po dacie PermanentStorage`.\n\n**Sortowanie:**\n\n- permanentStorageDate | invoicingDate | issueDate (Asc) - pole wybierane na podstawie filtrów\n\n\n\n**Wymagane uprawnienia**: `InvoiceRead`.",
      "requestBody" : {
        "description" : "Dane wejściowe określające kryteria i format eksportu paczki faktur.",
        "content" : {
          "application/json" : {
            "schema" : {
              "required" : [
                "encryption",
                "filters"
              ],
              "allOf" : [
                {
                  "$ref" : "#/components/schemas/InvoiceExportRequest"
                }
              ]
            },
            "example" : {
              "encryption" : {
                "encryptedSymmetricKey" : "bdUVjqLj+y2q6aBUuLxxXYAMqeDuIBRTyr+hB96DaWKaGzuVHw9p+Nk9vhzgF/Q5cavK2k6eCh6SdsrWI0s9mFFj4A4UJtsyD8Dn3esLfUZ5A1juuG3q3SBi/XOC/+9W+0T/KdwdE393mbiUNyx1K/0bw31vKJL0COeJIDP7usAMDl42/H1TNvkjk+8iZ80V0qW7D+RZdz+tdiY1xV0f2mfgwJ46V0CpZ+sB9UAssRj+eVffavJ0TOg2b5JaBxE8MCAvrF6rO5K4KBjUmoy7PP7g1qIbm8xI2GO0KnfPOO5OWj8rsotRwBgu7x19Ine3qYUvuvCZlXRGGZ5NHIzWPM4O74+gNalaMgFCsmv8mMhETSU4SfAGmJr9edxPjQSbgD5i2X4eDRDMwvyaAa7CP1b2oICju+0L7Fywd2ZtUcr6El++eTVoi8HYsTArntET++gULT7XXjmb8e3O0nxrYiYsE9GMJ7HBGv3NOoJ1NTm3a7U6+c0ZJiBVLvn6xXw10LQX243xH+ehsKo6djQJKYtqcNPaXtCwM1c9RrsOx/wRXyWCtTffqLiaR0LbYvfMJAcEWceG+RaeAx4p37OiQqdJypd6LAv9/0ECWK8Bip8yyoA+0EYiAJb9YuDz2YlQX9Mx9E9FzFIAsgEQ2w723HZYWgPywLb+dlsum4lTZKQ=",
                "initializationVector" : "c29tZUluaXRWZWN0b3I="
              },
              "filters" : {
                "subjectType" : "Subject1",
                "dateRange" : {
                  "dateType" : "PermanentStorage",
                  "from" : "2025-08-28T09:22:13.388+00:00",
                  "to" : "2025-09-28T09:22:13.388+00:00",
                  "restrictToPermanentStorageHwmDate" : true
                }
              }
            }
          }
        }
      },
      "responses" : {
        "201" : {
          "description" : "Created",
          "content" : {
            "application/json" : {
              "schema" : {
                "$ref" : "#/components/schemas/ExportInvoicesResponse"
              },
              "example" : {
                "referenceNumber" : "20251010-EH-1B6C9EB000-4B15D3AEB9-89"
              }
            }
          }
        },
        "400" : {
          "description" : "| ExceptionCode       | ExceptionDescription                                | Details                                                       | \n|---------------------|-----------------------------------------------------|---------------------------------------------------------------|\n| 21181               | Nieprawidłowe żądanie eksportu faktur.              | Nie można wyeksportować paczki faktur dla wybranego podmiotu ({subjecttype}) i zalogowanego identyfikatora kontekstu ({type}). |\n| 21182               | Osiągnięto limit trwających eksportów.              | Dla uwierzytelnionego podmiotu w bieżącym kontekście osiągnięto maksymalny limit {count} równoczesnych eksportów faktur. Spróbuj ponownie później. |\n| 21405 | Błąd walidacji danych wejściowych. | {treść błędu z walidatora} |",
          "content" : {
            "application/json" : {
              "schema" : {
                "$ref" : "#/components/schemas/ExceptionResponse"
              }
            }
          },
          "x-summary" : "Bad Request"
        },
        "429" : {
          "description" : "| | req / s | req / min | req / h | grupa\n| --- | --- | --- | --- | --- |\n| **Limity liczby żądań** | 40 | 80 | 200 | invoiceExport\n",
          "headers" : {
            "Retry-After" : {
              "schema" : {
                "$ref" : "#/components/schemas/RetryAfter"
              }
            }
          },
          "content" : {
            "application/json" : {
              "schema" : {
                "$ref" : "#/components/schemas/TooManyRequestsResponse"
              }
            }
          },
          "x-summary" : "Too Many Requests"
        },
        "403" : {
          "description" : "Forbidden"
        },
        "401" : {
          "description" : "Unauthorized"
        }
      },
      "security" : [
        {
          "Bearer" : [

          ]
        }
      ],
      "x-rate-limits" : {
        "perSecond" : 40,
        "perMinute" : 80,
        "perHour" : 200
      },
      "x-sort" : [
        {
          "allowedFields" : [
            "permanentStorageDate",
            "invoicingDate",
            "issueDate"
          ],
          "allowedDirections" : "Asc"
        }
      ],
      "x-required-permissions" : [
        "InvoiceRead"
      ]
    }
  }


  "InvoiceExportRequest" : {
    "required" : [
      "encryption",
      "filters"
    ],
    "type" : "object",
    "properties" : {
      "encryption" : {
        "required" : [
          "encryptedSymmetricKey",
          "initializationVector"
        ],
        "allOf" : [
          {
            "$ref" : "#/components/schemas/EncryptionInfo"
          }
        ],
        "description" : "Informacje wymagane do zaszyfrowania wyniku zapytania."
      },
      "filters" : {
        "required" : [
          "subjectType",
          "dateRange"
        ],
        "allOf" : [
          {
            "$ref" : "#/components/schemas/InvoiceQueryFilters"
          }
        ],
        "description" : "Zestaw filtrów do wyszukiwania faktur."
      }
    },
    "additionalProperties" : false
  }


  "EncryptionInfo" : {
    "required" : [
      "encryptedSymmetricKey",
      "initializationVector"
    ],
    "type" : "object",
    "properties" : {
      "encryptedSymmetricKey" : {
        "type" : "string",
        "description" : "Klucz symetryczny o długości 32 bajtów, zaszyfrowany algorytmem RSA (Padding: OAEP z SHA-256), zakodowany w formacie Base64.\n\n[Klucz publiczny Ministerstwa Finansów](/docs/v2/index.html#tag/Certyfikaty-klucza-publicznego)",
        "format" : "byte"
      },
      "initializationVector" : {
        "type" : "string",
        "description" : "Wektor inicjalizujący (IV) o długości 16 bajtów, używany do szyfrowania symetrycznego, zakodowany w formacie Base64.",
        "format" : "byte"
      }
    },
    "additionalProperties" : false
  }


  "InvoiceQueryFilters" : {
    "required" : [
      "dateRange",
      "subjectType"
    ],
    "type" : "object",
    "properties" : {
      "subjectType" : {
        "allOf" : [
          {
            "$ref" : "#/components/schemas/InvoiceQuerySubjectType"
          }
        ],
        "description" : "Typ podmiotu, którego dotyczą kryteria filtrowania metadanych faktur.\nOkreśla kontekst, w jakim przeszukiwane są dane.\n| Wartość | Opis |\n| --- | --- |\n| Subject1 | Podmiot 1 - sprzedawca |\n| Subject2 | Podmiot 2 - nabywca |\n| Subject3 | Podmiot 3 |\n| SubjectAuthorized | Podmiot upoważniony |\n"
      },
      "dateRange" : {
        "required" : [
          "dateType",
          "from"
        ],
        "allOf" : [
          {
            "$ref" : "#/components/schemas/InvoiceQueryDateRange"
          }
        ],
        "description" : "Typ i zakres dat, według którego filtrowane są faktury.\nMaksymalny dozwolony okres wynosi 3 miesiące w strefie UTC lub w strefie Europe/Warsaw (WAW).\n            \nFormat daty:\n * Daty muszą być przekazane w formacie ISO 8601, np. `yyyy-MM-ddTHH:mm:ss`.\n * Dopuszczalne są następujące warianty:\n   - z sufiksem `Z` (czas UTC),\n   - z jawnym offsetem, np. `+01:00`, `+03:00`,\n   - bez offsetu (interpretowane jako czas lokalny strefy Europe/Warsaw)."
      },
      "ksefNumber" : {
        "allOf" : [
          {
            "$ref" : "#/components/schemas/KsefNumber"
          }
        ],
        "description" : "Numer KSeF faktury (exact match).",
        "nullable" : true
      },
      "invoiceNumber" : {
        "maxLength" : 256,
        "type" : "string",
        "description" : "Numer faktury nadany przez wystawcę (exact match).",
        "nullable" : true
      },
      "amount" : {
        "required" : [
          "type"
        ],
        "allOf" : [
          {
            "$ref" : "#/components/schemas/InvoiceQueryAmount"
          }
        ],
        "description" : "Filtr kwotowy – brutto, netto lub VAT (z wartością).",
        "nullable" : true
      },
      "sellerNip" : {
        "allOf" : [
          {
            "$ref" : "#/components/schemas/Nip"
          }
        ],
        "description" : "Nip sprzedawcy (exact match).",
        "nullable" : true
      },
      "buyerIdentifier" : {
        "required" : [
          "type"
        ],
        "allOf" : [
          {
            "$ref" : "#/components/schemas/InvoiceQueryBuyerIdentifier"
          }
        ],
        "description" : "Identyfikator nabywcy.\n| Type | Value |\n| --- | --- |\n| Nip | 10 cyfrowy numer NIP |\n| VatUe | Identyfikator VAT UE podmiotu unijnego. |\n| Other | Inny identyfikator|\n| None  | Brak identyfikatora nabywcy |",
        "nullable" : true
      },
      "currencyCodes" : {
        "type" : "array",
        "items" : {
          "$ref" : "#/components/schemas/CurrencyCode"
        },
        "description" : "Kody walut.",
        "nullable" : true
      },
      "invoicingMode" : {
        "allOf" : [
          {
            "$ref" : "#/components/schemas/InvoicingMode"
          }
        ],
        "description" : "Tryb wystawienia faktury: online lub offline.",
        "nullable" : true
      },
      "isSelfInvoicing" : {
        "type" : "boolean",
        "description" : "Czy faktura została wystawiona w trybie samofakturowania.",
        "nullable" : true
      },
      "formType" : {
        "allOf" : [
          {
            "$ref" : "#/components/schemas/InvoiceQueryFormType"
          }
        ],
        "description" : "Typ dokumentu.\n| Wartość | Opis |\n| --- | --- |\n| FA | Faktura VAT |\n| PEF | Faktura PEF |\n| RR | Faktura RR |\n",
        "nullable" : true
      },
      "invoiceTypes" : {
        "type" : "array",
        "items" : {
          "$ref" : "#/components/schemas/InvoiceType"
        },
        "description" : "Rodzaje faktur.\n| Wartość | Opis |\n| --- | --- |\n| Vat | (FA) Podstawowa |\n| Zal | (FA) Zaliczkowa |\n| Kor | (FA) Korygująca |\n| Roz | (FA) Rozliczeniowa |\n| Upr | (FA) Uproszczona |\n| KorZal | (FA) Korygująca fakturę zaliczkową |\n| KorRoz | (FA) Korygująca fakturę rozliczeniową |\n| VatPef | (PEF) Podstawowa |\n| VatPefSp | (PEF) Specjalizowana |\n| KorPef | (PEF) Korygująca |\n| VatRr | (RR) Podstawowa |\n| KorVatRr | (RR) Korygująca |\n",
        "nullable" : true
      },
      "hasAttachment" : {
        "type" : "boolean",
        "description" : "Czy faktura ma załącznik.",
        "nullable" : true
      }
    },
    "additionalProperties" : false
  }


  "InvoiceQuerySubjectType" : {
    "enum" : [
      "Subject1",
      "Subject2",
      "Subject3",
      "SubjectAuthorized"
    ],
    "type" : "string",
    "description" : "| Wartość | Opis |\n| --- | --- |\n| Subject1 | Podmiot 1 - sprzedawca |\n| Subject2 | Podmiot 2 - nabywca |\n| Subject3 | Podmiot 3 |\n| SubjectAuthorized | Podmiot upoważniony |\n"
  }


  "InvoiceQueryDateRange" : {
    "required" : [
      "dateType",
      "from"
    ],
    "type" : "object",
    "properties" : {
      "dateType" : {
        "allOf" : [
          {
            "$ref" : "#/components/schemas/InvoiceQueryDateType"
          }
        ],
        "description" : "Typ daty, według której ma być zastosowany zakres.\n| Wartość | Opis |\n| --- | --- |\n| Issue | Data wystawienia faktury. |\n| Invoicing | Data przyjęcia faktury w systemie KSeF (do dalszego przetwarzania). |\n| PermanentStorage | Data trwałego zapisu faktury w repozytorium systemu KSeF. |\n"
      },
      "from" : {
        "type" : "string",
        "description" : "Data początkowa zakresu w formacie ISO-8601 np. 2026-01-03T13:45:00+00:00.",
        "format" : "date-time"
      },
      "to" : {
        "type" : "string",
        "description" : "Data końcowa zakresu w formacie ISO-8601. Jeśli nie zostanie podana, przyjmowana jest bieżąca data i czas w UTC.",
        "format" : "date-time",
        "nullable" : true
      },
      "restrictToPermanentStorageHwmDate" : {
        "type" : "boolean",
        "description" : "Określa, czy system ma ograniczyć filtrowanie (zakres dateRange.to) do wartości `PermanentStorageHwmDate`.\n\n* Dotyczy wyłącznie zapytań z `dateType = PermanentStorage`,  \n* Gdy `true`, system ogranicza filtrowanie tak, aby wartość `dateRange.to` nie przekraczała wartości `PermanentStorageHwmDate`,  \n* Gdy `null` lub `false`, filtrowanie może wykraczać poza `PermanentStorageHwmDate`.",
        "nullable" : true
      }
    },
    "additionalProperties" : false
  }


  "InvoiceQueryDateType" : {
    "enum" : [
      "Issue",
      "Invoicing",
      "PermanentStorage"
    ],
    "type" : "string",
    "description" : "| Wartość | Opis |\n| --- | --- |\n| Issue | Data wystawienia faktury. |\n| Invoicing | Data przyjęcia faktury w systemie KSeF (do dalszego przetwarzania). |\n| PermanentStorage | Data trwałego zapisu faktury w repozytorium systemu KSeF. |\n"
  }


  "KsefNumber" : {
    "maxLength" : 36,
    "minLength" : 35,
    "pattern" : "^([1-9](\\d[1-9]|[1-9]\\d)\\d{7})-(20[2-9][0-9]|2[1-9]\\d{2}|[3-9]\\d{3})(0[1-9]|1[0-2])(0[1-9]|[12]\\d|3[01])-([0-9A-F]{6})-?([0-9A-F]{6})-([0-9A-F]{2})$",
    "type" : "string",
    "description" : "Numer KSeF o długości 36 znaków jest akceptowany, by zachować kompatybilność wsteczna z KSeF 1.0. W KSeF 2.0 numery są generowane wyłącznie w formacie 35-znakowym."
  }


  "InvoiceQueryAmount" : {
    "required" : [
      "type"
    ],
    "type" : "object",
    "properties" : {
      "type" : {
        "allOf" : [
          {
            "$ref" : "#/components/schemas/AmountType"
          }
        ]
      },
      "from" : {
        "type" : "number",
        "format" : "double",
        "nullable" : true
      },
      "to" : {
        "type" : "number",
        "format" : "double",
        "nullable" : true
      }
    },
    "additionalProperties" : false
  }


  "AmountType" : {
    "enum" : [
      "Brutto",
      "Netto",
      "Vat"
    ],
    "type" : "string"
  }


  "Nip" : {
    "maxLength" : 10,
    "minLength" : 10,
    "pattern" : "^[1-9]((\\d[1-9])|([1-9]\\d))\\d{7}$",
    "type" : "string",
    "description" : "10 cyfrowy numer NIP."
  }


  "InvoiceQueryBuyerIdentifier" : {
    "required" : [
      "type"
    ],
    "type" : "object",
    "properties" : {
      "type" : {
        "allOf" : [
          {
            "$ref" : "#/components/schemas/BuyerIdentifierType"
          }
        ],
        "description" : "Typ identyfikatora nabywcy.\n| Wartość | Opis |\n| --- | --- |\n| Nip | 10 cyfrowy numer NIP |\n| VatUe | Identyfikator VAT UE podmiotu unijnego |\n| Other | Inny identyfikator |\n| None | Brak identyfikatora nabywcy |\n"
      },
      "value" : {
        "maxLength" : 50,
        "type" : "string",
        "description" : "Wartość identyfikatora nabywcy (exact match).",
        "nullable" : true
      }
    },
    "additionalProperties" : false
  }


  "BuyerIdentifierType" : {
    "enum" : [
      "Nip",
      "VatUe",
      "Other",
      "None"
    ],
    "type" : "string",
    "description" : "| Wartość | Opis |\n| --- | --- |\n| Nip | 10 cyfrowy numer NIP |\n| VatUe | Identyfikator VAT UE podmiotu unijnego |\n| Other | Inny identyfikator |\n| None | Brak identyfikatora nabywcy |\n"
  }


  "CurrencyCode" : {
    "enum" : [
      "AED",
      "AFN",
      "ALL",
      "AMD",
      "ANG",
      "AOA",
      "ARS",
      "AUD",
      "AWG",
      "AZN",
      "BAM",
      "BBD",
      "BDT",
      "BGN",
      "BHD",
      "BIF",
      "BMD",
      "BND",
      "BOB",
      "BOV",
      "BRL",
      "BSD",
      "BTN",
      "BWP",
      "BYN",
      "BZD",
      "CAD",
      "CDF",
      "CHE",
      "CHF",
      "CHW",
      "CLF",
      "CLP",
      "CNY",
      "COP",
      "COU",
      "CRC",
      "CUC",
      "CUP",
      "CVE",
      "CZK",
      "DJF",
      "DKK",
      "DOP",
      "DZD",
      "EGP",
      "ERN",
      "ETB",
      "EUR",
      "FJD",
      "FKP",
      "GBP",
      "GEL",
      "GGP",
      "GHS",
      "GIP",
      "GMD",
      "GNF",
      "GTQ",
      "GYD",
      "HKD",
      "HNL",
      "HRK",
      "HTG",
      "HUF",
      "IDR",
      "ILS",
      "IMP",
      "INR",
      "IQD",
      "IRR",
      "ISK",
      "JEP",
      "JMD",
      "JOD",
      "JPY",
      "KES",
      "KGS",
      "KHR",
      "KMF",
      "KPW",
      "KRW",
      "KWD",
      "KYD",
      "KZT",
      "LAK",
      "LBP",
      "LKR",
      "LRD",
      "LSL",
      "LYD",
      "MAD",
      "MDL",
      "MGA",
      "MKD",
      "MMK",
      "MNT",
      "MOP",
      "MRU",
      "MUR",
      "MVR",
      "MWK",
      "MXN",
      "MXV",
      "MYR",
      "MZN",
      "NAD",
      "NGN",
      "NIO",
      "NOK",
      "NPR",
      "NZD",
      "OMR",
      "PAB",
      "PEN",
      "PGK",
      "PHP",
      "PKR",
      "PLN",
      "PYG",
      "QAR",
      "RON",
      "RSD",
      "RUB",
      "RWF",
      "SAR",
      "SBD",
      "SCR",
      "SDG",
      "SEK",
      "SGD",
      "SHP",
      "SLL",
      "SOS",
      "SRD",
      "SSP",
      "STN",
      "SVC",
      "SYP",
      "SZL",
      "THB",
      "TJS",
      "TMT",
      "TND",
      "TOP",
      "TRY",
      "TTD",
      "TWD",
      "TZS",
      "UAH",
      "UGX",
      "USD",
      "USN",
      "UYI",
      "UYU",
      "UYW",
      "UZS",
      "VES",
      "VND",
      "VUV",
      "WST",
      "XAF",
      "XAG",
      "XAU",
      "XBA",
      "XBB",
      "XBC",
      "XBD",
      "XCD",
      "XCG",
      "XDR",
      "XOF",
      "XPD",
      "XPF",
      "XPT",
      "XSU",
      "XUA",
      "XXX",
      "YER",
      "ZAR",
      "ZMW",
      "ZWL"
    ],
    "type" : "string"
  }


  "InvoicingMode" : {
    "enum" : [
      "Online",
      "Offline"
    ],
    "type" : "string"
  }


  "InvoiceQueryFormType" : {
    "enum" : [
      "FA",
      "PEF",
      "RR"
    ],
    "type" : "string",
    "description" : "| Wartość | Opis |\n| --- | --- |\n| FA | Faktura VAT |\n| PEF | Faktura PEF |\n| RR | Faktura RR |\n"
  }


  "InvoiceType" : {
    "enum" : [
      "Vat",
      "Zal",
      "Kor",
      "Roz",
      "Upr",
      "KorZal",
      "KorRoz",
      "VatPef",
      "VatPefSp",
      "KorPef",
      "VatRr",
      "KorVatRr"
    ],
    "type" : "string",
    "description" : "| Wartość | Opis |\n| --- | --- |\n| Vat | (FA) Podstawowa |\n| Zal | (FA) Zaliczkowa |\n| Kor | (FA) Korygująca |\n| Roz | (FA) Rozliczeniowa |\n| Upr | (FA) Uproszczona |\n| KorZal | (FA) Korygująca fakturę zaliczkową |\n| KorRoz | (FA) Korygująca fakturę rozliczeniową |\n| VatPef | (PEF) Podstawowa |\n| VatPefSp | (PEF) Specjalizowana |\n| KorPef | (PEF) Korygująca |\n| VatRr | (RR) Podstawowa |\n| KorVatRr | (RR) Korygująca |\n"
  }


  "ExportInvoicesResponse" : {
    "required" : [
      "referenceNumber"
    ],
    "type" : "object",
    "properties" : {
      "referenceNumber" : {
        "allOf" : [
          {
            "$ref" : "#/components/schemas/ReferenceNumber"
          }
        ],
        "description" : "Numer referencyjny eksportu faktur."
      }
    },
    "additionalProperties" : false
  }


  "ReferenceNumber" : {
    "maxLength" : 36,
    "minLength" : 36,
    "type" : "string",
    "description" : "Numer referencyjny."
  }



//---------------------------------------------------------------------------------------------------
request: "/invoices/exports": post: application/json
headers:
Authorization: Bearer {securityToken}
body:
{
  "encryption": { // required; type: object; items: #/components/schemas/EncryptionInfo; description: Informacje wymagane do zaszyfrowania wyniku zapytania.
    "encryptedSymmetricKey": "", // required; type: string; format: byte; description: Klucz symetryczny o długości 32 bajtów, zaszyfrowany algorytmem RSA (Padding: OAEP z SHA-256), zakodowany w formacie Base64.

[Klucz publiczny Ministerstwa Finansów](/docs/v2/index.html#tag/Certyfikaty-klucza-publicznego)
    "initializationVector": "" // required; type: string; format: byte; description: Wektor inicjalizujący (IV) o długości 16 bajtów, używany do szyfrowania symetrycznego, zakodowany w formacie Base64.
  },
  "filters": { // required; type: object; items: #/components/schemas/InvoiceQueryFilters; description: Zestaw filtrów do wyszukiwania faktur.
    "subjectType": "", // required; type: string; items: #/components/schemas/InvoiceQuerySubjectType; description: Typ podmiotu, którego dotyczą kryteria filtrowania metadanych faktur.
Określa kontekst, w jakim przeszukiwane są dane.
| Wartość | Opis |
| --- | --- |
| Subject1 | Podmiot 1 - sprzedawca |
| Subject2 | Podmiot 2 - nabywca |
| Subject3 | Podmiot 3 |
| SubjectAuthorized | Podmiot upoważniony |
    "dateRange": { // required; type: object; items: #/components/schemas/InvoiceQueryDateRange; description: Typ i zakres dat, według którego filtrowane są faktury.
Maksymalny dozwolony okres wynosi 3 miesiące w strefie UTC lub w strefie Europe/Warsaw (WAW).
            
Format daty:
 * Daty muszą być przekazane w formacie ISO 8601, np. `yyyy-MM-ddTHH:mm:ss`.
 * Dopuszczalne są następujące warianty:
   - z sufiksem `Z` (czas UTC),
   - z jawnym offsetem, np. `+01:00`, `+03:00`,
   - bez offsetu (interpretowane jako czas lokalny strefy Europe/Warsaw).
      "dateType": "", // required; type: string; items: #/components/schemas/InvoiceQueryDateType; description: Typ daty, według której ma być zastosowany zakres.
| Wartość | Opis |
| --- | --- |
| Issue | Data wystawienia faktury. |
| Invoicing | Data przyjęcia faktury w systemie KSeF (do dalszego przetwarzania). |
| PermanentStorage | Data trwałego zapisu faktury w repozytorium systemu KSeF. |
      "from": "", // required; type: string; format: date-time; description: Data początkowa zakresu w formacie ISO-8601 np. 2026-01-03T13:45:00+00:00.
      "to": "", // type: string; format: date-time; nullable: true; description: Data końcowa zakresu w formacie ISO-8601. Jeśli nie zostanie podana, przyjmowana jest bieżąca data i czas w UTC.
      "restrictToPermanentStorageHwmDate": true/false // type: boolean; nullable: true; description: Określa, czy system ma ograniczyć filtrowanie (zakres dateRange.to) do wartości `PermanentStorageHwmDate`.

* Dotyczy wyłącznie zapytań z `dateType = PermanentStorage`,  
* Gdy `true`, system ogranicza filtrowanie tak, aby wartość `dateRange.to` nie przekraczała wartości `PermanentStorageHwmDate`,  
* Gdy `null` lub `false`, filtrowanie może wykraczać poza `PermanentStorageHwmDate`.
    },
    "ksefNumber": "", // type: string; items: #/components/schemas/KsefNumber; description: Numer KSeF faktury (exact match).
    "invoiceNumber": "", // type: string; nullable: true; description: Numer faktury nadany przez wystawcę (exact match).
    "amount": { // type: object; items: #/components/schemas/InvoiceQueryAmount; nullable: true; description: Filtr kwotowy – brutto, netto lub VAT (z wartością).
      "type": "", // required; type: string; items: #/components/schemas/AmountType;
      "from": 0, // type: number; format: double; nullable: true;
      "to": 0 // type: number; format: double; nullable: true;
    },
    "sellerNip": "", // type: string; items: #/components/schemas/Nip; description: Nip sprzedawcy (exact match).
    "buyerIdentifier": { // type: object; items: #/components/schemas/InvoiceQueryBuyerIdentifier; nullable: true; description: Identyfikator nabywcy.
| Type | Value |
| --- | --- |
| Nip | 10 cyfrowy numer NIP |
| VatUe | Identyfikator VAT UE podmiotu unijnego. |
| Other | Inny identyfikator|
| None  | Brak identyfikatora nabywcy |
      "type": "", // required; type: string; items: #/components/schemas/BuyerIdentifierType; description: Typ identyfikatora nabywcy.
| Wartość | Opis |
| --- | --- |
| Nip | 10 cyfrowy numer NIP |
| VatUe | Identyfikator VAT UE podmiotu unijnego |
| Other | Inny identyfikator |
| None | Brak identyfikatora nabywcy |
      "value": "" // type: string; nullable: true; description: Wartość identyfikatora nabywcy (exact match).
    },
    "currencyCodes": [ // type: array; nullable: true; description: Kody walut.
    ],
    "invoicingMode": "", // type: string; items: #/components/schemas/InvoicingMode; description: Tryb wystawienia faktury: online lub offline.
    "isSelfInvoicing": true/false, // type: boolean; nullable: true; description: Czy faktura została wystawiona w trybie samofakturowania.
    "formType": "", // type: string; items: #/components/schemas/InvoiceQueryFormType; description: Typ dokumentu.
| Wartość | Opis |
| --- | --- |
| FA | Faktura VAT |
| PEF | Faktura PEF |
| RR | Faktura RR |
    "invoiceTypes": [ // type: array; nullable: true; description: Rodzaje faktur.
| Wartość | Opis |
| --- | --- |
| Vat | (FA) Podstawowa |
| Zal | (FA) Zaliczkowa |
| Kor | (FA) Korygująca |
| Roz | (FA) Rozliczeniowa |
| Upr | (FA) Uproszczona |
| KorZal | (FA) Korygująca fakturę zaliczkową |
| KorRoz | (FA) Korygująca fakturę rozliczeniową |
| VatPef | (PEF) Podstawowa |
| VatPefSp | (PEF) Specjalizowana |
| KorPef | (PEF) Korygująca |
| VatRr | (RR) Podstawowa |
| KorVatRr | (RR) Korygująca |
    ],
    "hasAttachment": true/false // type: boolean; nullable: true; description: Czy faktura ma załącznik.
  }
}



response (201): application/json
{
  "referenceNumber": "" // required; type: string; items: #/components/schemas/ReferenceNumber; description: Numer referencyjny eksportu faktur.
}
