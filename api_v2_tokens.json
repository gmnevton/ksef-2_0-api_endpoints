//
// Endpoint: /api/v2/tokens
//
// Generated by OpenAPI_JSON_To_Single_Endpoint app.
// Author: Grzegorz Molenda.
// (C) 2025, All rights reserved.
// Released under MIT License.
//
  "/api/v2/tokens" : {
    "post" : {
      "tags" : [
        "Tokeny KSeF"
      ],
      "summary" : "Wygenerowanie nowego tokena",
      "description" : "Zwraca token, który może być użyty do uwierzytelniania się w KSeF.\n\nToken może być generowany tylko w kontekście NIP lub identyfikatora wewnętrznego. Jest zwracany tylko raz. Zaczyna być aktywny w momencie gdy jego status zmieni się na `Active`.",
      "requestBody" : {
        "content" : {
          "application/json" : {
            "schema" : {
              "required" : [
                "permissions",
                "description"
              ],
              "allOf" : [
                {
                  "$ref" : "#/components/schemas/GenerateTokenRequest"
                }
              ]
            },
            "example" : {
              "permissions" : [
                "InvoiceRead",
                "InvoiceWrite"
              ]
            }
          }
        }
      },
      "responses" : {
        "202" : {
          "description" : "Accepted",
          "content" : {
            "application/json" : {
              "schema" : {
                "$ref" : "#/components/schemas/GenerateTokenResponse"
              },
              "example" : {
                "referenceNumber" : "20251010-EC-1DCE3E3000-12ECB5B36E-45",
                "token" : "20251010-EC-1DCE3E3000-12ECB5B36E-45|nip-5265877635|919f704466624ce29cd5ac7b65ded5e7cccc112eee314f2aaa76e02cd16df7b9"
              }
            }
          }
        },
        "400" : {
          "description" : "| ExceptionCode       | ExceptionDescription                                       | Details |\n|---------------------|------------------------------------------------------------|---------|\n| 26001               | Nie można nadać tokenowi uprawnień których nie posiadasz.  | Informacja o brakujących uprawnieniach. |\n| 26002               | Nie można wygenerować tokena dla obecnego typu kontekstu.  | Informacja o aktualnym i dozwolonych typach kontekstu. |\n| 21405 | Błąd walidacji danych wejściowych. | {treść błędu z walidatora} |",
          "content" : {
            "application/json" : {
              "schema" : {
                "$ref" : "#/components/schemas/ExceptionResponse"
              }
            }
          },
          "x-summary" : "Bad Request"
        },
        "401" : {
          "description" : "Unauthorized"
        }
      },
      "security" : [
        {
          "Bearer" : [

          ]
        }
      ]
    },
    "get" : {
      "tags" : [
        "Tokeny KSeF"
      ],
      "summary" : "Pobranie listy wygenerowanych tokenów",
      "parameters" : [
        {
          "name" : "status",
          "in" : "query",
          "description" : "Status tokenów do zwrócenia. W przypadku braku parametru zwracane są wszystkie tokeny. Parametr można przekazać wielokrotnie.\n| Wartość | Opis |\n| --- | --- |\n| Pending | Token został utworzony ale jest jeszcze w trakcie aktywacji i nadawania uprawnień. Nie może być jeszcze wykorzystywany do uwierzytelniania. |\n| Active | Token jest aktywny i może być wykorzystywany do uwierzytelniania. |\n| Revoking | Token jest w trakcie unieważniania. Nie może już być wykorzystywany do uwierzytelniania. |\n| Revoked | Token został unieważniony i nie może być wykorzystywany do uwierzytelniania. |\n| Failed | Nie udało się aktywować tokena. Należy wygenerować nowy token, obecny nie może być wykorzystywany do uwierzytelniania. |\n",
          "style" : "form",
          "schema" : {
            "type" : "array",
            "items" : {
              "$ref" : "#/components/schemas/AuthenticationTokenStatus"
            }
          }
        },
        {
          "name" : "description",
          "in" : "query",
          "description" : "Umożliwia filtrowanie tokenów po opisie. Wartość parametru jest wyszukiwana w opisie tokena (operacja nie rozróżnia wielkości liter). Należy podać co najmniej 3 znaki.",
          "schema" : {
            "type" : "string"
          }
        },
        {
          "name" : "authorIdentifier",
          "in" : "query",
          "description" : "Umożliwia filtrowanie tokenów po ich twórcy. Wartość parametru jest wyszukiwana w identyfikatorze (operacja nie rozróżnia wielkości liter). Należy podać co najmniej 3 znaki.",
          "schema" : {
            "type" : "string"
          }
        },
        {
          "name" : "authorIdentifierType",
          "in" : "query",
          "description" : "Umożliwia filtrowanie tokenów po ich twórcy. Wartość parametru określa typ identyfikatora w którym będzie wyszukiwany ciąg znaków przekazany w parametrze `authorIdentifier`.\n| Wartość | Opis |\n| --- | --- |\n| Nip | NIP. |\n| Pesel | PESEL. |\n| Fingerprint | Odcisk palca certyfikatu. |\n",
          "schema" : {
            "allOf" : [
              {
                "$ref" : "#/components/schemas/TokenAuthorIdentifierType"
              }
            ]
          }
        },
        {
          "name" : "pageSize",
          "in" : "query",
          "description" : "Rozmiar strony wyników.",
          "schema" : {
            "maximum" : 100,
            "exclusiveMaximum" : false,
            "minimum" : 10,
            "exclusiveMinimum" : false,
            "type" : "integer",
            "format" : "int32",
            "default" : 10
          }
        },
        {
          "name" : "x-continuation-token",
          "in" : "header",
          "description" : "Token służący do pobrania kolejnej strony wyników.",
          "schema" : {
            "type" : "string"
          }
        }
      ],
      "responses" : {
        "200" : {
          "description" : "OK",
          "content" : {
            "application/json" : {
              "schema" : {
                "$ref" : "#/components/schemas/QueryTokensResponse"
              },
              "example" : {
                "continuationToken" : "W3sidG9rZW4iOiIrUklEOn4zeHd0QUlqZUc5VkhCQUFBQUFBQUJBPT0jUlQ6MSNUUkM6MTAjSVNWOjIjSUVPOjY1NTY3I1FDRjo4I0ZQQzpBZ2dBQUFBQUFCQUFBQUFBQUFBQUVBQUFBQUFBQUFBUUFBQUVBRWVFMllFPSIsInJhbmdlIjp7Im1pbiI6IjA1QzFERjIxOUY5OTIwIiwibWF4IjoiRkYifX1d",
                "tokens" : [
                  {
                    "referenceNumber" : "20251001-EC-2DD3AFF000-A6B7F19A95-11",
                    "authorIdentifier" : {
                      "type" : "Nip",
                      "value" : "5265877635"
                    },
                    "contextIdentifier" : {
                      "type" : "Nip",
                      "value" : "5265877635"
                    },
                    "requestedPermissions" : [
                      "InvoiceRead",
                      "InvoiceWrite"
                    ],
                    "dateCreated" : "2025-10-01T13:20:52.9919681+00:00",
                    "status" : "Active",
                    "statusDetails" : [

                    ]
                  }
                ]
              }
            }
          }
        },
        "400" : {
          "description" : "| ExceptionCode       | ExceptionDescription                                | Details                                                     | \n|---------------------|-----------------------------------------------------|-------------------------------------------------------------|\n| 21418               | Przekazany token kontynuacji ma nieprawidłowy format. |   |\n| 21405 | Błąd walidacji danych wejściowych. | {treść błędu z walidatora} |",
          "content" : {
            "application/json" : {
              "schema" : {
                "$ref" : "#/components/schemas/ExceptionResponse"
              }
            }
          },
          "x-summary" : "Bad Request"
        },
        "401" : {
          "description" : "Unauthorized"
        }
      },
      "security" : [
        {
          "Bearer" : [

          ]
        }
      ]
    }
  }


  "GenerateTokenRequest" : {
    "required" : [
      "description",
      "permissions"
    ],
    "type" : "object",
    "properties" : {
      "permissions" : {
        "type" : "array",
        "items" : {
          "$ref" : "#/components/schemas/TokenPermissionType"
        },
        "description" : "Uprawnienia przypisane tokenowi."
      },
      "description" : {
        "type" : "string",
        "description" : "Opis tokena."
      }
    },
    "additionalProperties" : false
  }


  "TokenPermissionType" : {
    "enum" : [
      "InvoiceRead",
      "InvoiceWrite",
      "CredentialsRead",
      "CredentialsManage",
      "SubunitManage",
      "EnforcementOperations"
    ],
    "type" : "string"
  }


  "GenerateTokenResponse" : {
    "required" : [
      "referenceNumber",
      "token"
    ],
    "type" : "object",
    "properties" : {
      "referenceNumber" : {
        "type" : "string",
        "description" : "Numer referencyjny tokena KSeF. Za jego pomocą można sprawdzić jego status lub go unieważnić."
      },
      "token" : {
        "type" : "string",
        "description" : "Token KSeF."
      }
    },
    "additionalProperties" : false
  }



//---------------------------------------------------------------------------------------------------
request: "/api/v2/tokens": post: application/json
headers:
Authentication: Bearer {securityToken}
body:
{
  "permissions": [ // required; type: array; description: Uprawnienia przypisane tokenowi.
  ],
  "description": "" // required; type: string; description: Opis tokena.
}



response (202): application/json
{
  "referenceNumber": "", // required; type: string; description: Numer referencyjny tokena KSeF. Za jego pomocą można sprawdzić jego status lub go unieważnić.
  "token": "" // required; type: string; description: Token KSeF.
}


  "AuthenticationTokenStatus" : {
    "enum" : [
      "Pending",
      "Active",
      "Revoking",
      "Revoked",
      "Failed"
    ],
    "type" : "string",
    "description" : "| Wartość | Opis |\n| --- | --- |\n| Pending | Token został utworzony ale jest jeszcze w trakcie aktywacji i nadawania uprawnień. Nie może być jeszcze wykorzystywany do uwierzytelniania. |\n| Active | Token jest aktywny i może być wykorzystywany do uwierzytelniania. |\n| Revoking | Token jest w trakcie unieważniania. Nie może już być wykorzystywany do uwierzytelniania. |\n| Revoked | Token został unieważniony i nie może być wykorzystywany do uwierzytelniania. |\n| Failed | Nie udało się aktywować tokena. Należy wygenerować nowy token, obecny nie może być wykorzystywany do uwierzytelniania. |\n"
  }


  "TokenAuthorIdentifierType" : {
    "enum" : [
      "Nip",
      "Pesel",
      "Fingerprint"
    ],
    "type" : "string",
    "description" : "| Wartość | Opis |\n| --- | --- |\n| Nip | NIP. |\n| Pesel | PESEL. |\n| Fingerprint | Odcisk palca certyfikatu. |\n"
  }


  "QueryTokensResponse" : {
    "required" : [
      "tokens"
    ],
    "type" : "object",
    "properties" : {
      "continuationToken" : {
        "type" : "string",
        "description" : "Token służący do pobrania kolejnej strony wyników. Jeśli jest pusty, to nie ma kolejnych stron.",
        "nullable" : true
      },
      "tokens" : {
        "type" : "array",
        "items" : {
          "$ref" : "#/components/schemas/QueryTokensResponseItem"
        },
        "description" : "Lista tokenów uwierzytelniających."
      }
    },
    "additionalProperties" : false
  }


  "QueryTokensResponseItem" : {
    "required" : [
      "authorIdentifier",
      "contextIdentifier",
      "dateCreated",
      "description",
      "referenceNumber",
      "requestedPermissions",
      "status"
    ],
    "type" : "object",
    "properties" : {
      "referenceNumber" : {
        "type" : "string",
        "description" : "Numer referencyjny tokena."
      },
      "authorIdentifier" : {
        "required" : [
          "type",
          "value"
        ],
        "allOf" : [
          {
            "$ref" : "#/components/schemas/TokenAuthorIdentifierTypeIdentifier"
          }
        ],
        "description" : "Identyfikator osoby która wygenerowała token."
      },
      "contextIdentifier" : {
        "required" : [
          "type",
          "value"
        ],
        "allOf" : [
          {
            "$ref" : "#/components/schemas/TokenContextIdentifierTypeIdentifier"
          }
        ],
        "description" : "Identyfikator kontekstu, w którym został wygenerowany token i do którego daje dostęp."
      },
      "description" : {
        "type" : "string",
        "description" : "Opis tokena."
      },
      "requestedPermissions" : {
        "type" : "array",
        "items" : {
          "$ref" : "#/components/schemas/TokenPermissionType"
        },
        "description" : "Uprawnienia przypisane tokenowi."
      },
      "dateCreated" : {
        "type" : "string",
        "description" : "Data i czas utworzenia tokena.",
        "format" : "date-time"
      },
      "lastUseDate" : {
        "type" : "string",
        "description" : "Data ostatniego użycia tokena.",
        "format" : "date-time",
        "nullable" : true
      },
      "status" : {
        "allOf" : [
          {
            "$ref" : "#/components/schemas/AuthenticationTokenStatus"
          }
        ],
        "description" : "Status tokena.\n| Wartość | Opis |\n| --- | --- |\n| Pending | Token został utworzony ale jest jeszcze w trakcie aktywacji i nadawania uprawnień. Nie może być jeszcze wykorzystywany do uwierzytelniania. |\n| Active | Token jest aktywny i może być wykorzystywany do uwierzytelniania. |\n| Revoking | Token jest w trakcie unieważniania. Nie może już być wykorzystywany do uwierzytelniania. |\n| Revoked | Token został unieważniony i nie może być wykorzystywany do uwierzytelniania. |\n| Failed | Nie udało się aktywować tokena. Należy wygenerować nowy token, obecny nie może być wykorzystywany do uwierzytelniania. |\n"
      },
      "statusDetails" : {
        "type" : "array",
        "items" : {
          "type" : "string"
        },
        "description" : "Dodatkowe informacje na temat statusu, zwracane w przypadku błędów.",
        "nullable" : true
      }
    },
    "additionalProperties" : false
  }


  "TokenAuthorIdentifierTypeIdentifier" : {
    "required" : [
      "type",
      "value"
    ],
    "type" : "object",
    "properties" : {
      "type" : {
        "allOf" : [
          {
            "$ref" : "#/components/schemas/TokenAuthorIdentifierType"
          }
        ],
        "description" : "Typ identyfikatora.\n| Wartość | Opis |\n| --- | --- |\n| Nip | NIP. |\n| Pesel | PESEL. |\n| Fingerprint | Odcisk palca certyfikatu. |\n"
      },
      "value" : {
        "type" : "string",
        "description" : "Wartość identyfikatora."
      }
    },
    "additionalProperties" : false
  }


  "TokenAuthorIdentifierType" : {
    "enum" : [
      "Nip",
      "Pesel",
      "Fingerprint"
    ],
    "type" : "string",
    "description" : "| Wartość | Opis |\n| --- | --- |\n| Nip | NIP. |\n| Pesel | PESEL. |\n| Fingerprint | Odcisk palca certyfikatu. |\n"
  }


  "TokenContextIdentifierTypeIdentifier" : {
    "required" : [
      "type",
      "value"
    ],
    "type" : "object",
    "properties" : {
      "type" : {
        "allOf" : [
          {
            "$ref" : "#/components/schemas/TokenContextIdentifierType"
          }
        ],
        "description" : "Typ identyfikatora.\n| Wartość | Opis |\n| --- | --- |\n| Nip | NIP. |\n| InternalId | Identyfikator wewnętrzny. |\n| NipVatUe | Dwuczłonowy identyfikator składający się z numeru NIP i numeru VAT-UE: `{nip}-{vat_ue}`. |\n| PeppolId | Identyfikator dostawcy usług Peppol. |\n"
      },
      "value" : {
        "type" : "string",
        "description" : "Wartość identyfikatora."
      }
    },
    "additionalProperties" : false
  }


  "TokenContextIdentifierType" : {
    "enum" : [
      "Nip",
      "InternalId",
      "NipVatUe",
      "PeppolId"
    ],
    "type" : "string",
    "description" : "| Wartość | Opis |\n| --- | --- |\n| Nip | NIP. |\n| InternalId | Identyfikator wewnętrzny. |\n| NipVatUe | Dwuczłonowy identyfikator składający się z numeru NIP i numeru VAT-UE: `{nip}-{vat_ue}`. |\n| PeppolId | Identyfikator dostawcy usług Peppol. |\n"
  }


  "TokenPermissionType" : {
    "enum" : [
      "InvoiceRead",
      "InvoiceWrite",
      "CredentialsRead",
      "CredentialsManage",
      "SubunitManage",
      "EnforcementOperations"
    ],
    "type" : "string"
  }


  "AuthenticationTokenStatus" : {
    "enum" : [
      "Pending",
      "Active",
      "Revoking",
      "Revoked",
      "Failed"
    ],
    "type" : "string",
    "description" : "| Wartość | Opis |\n| --- | --- |\n| Pending | Token został utworzony ale jest jeszcze w trakcie aktywacji i nadawania uprawnień. Nie może być jeszcze wykorzystywany do uwierzytelniania. |\n| Active | Token jest aktywny i może być wykorzystywany do uwierzytelniania. |\n| Revoking | Token jest w trakcie unieważniania. Nie może już być wykorzystywany do uwierzytelniania. |\n| Revoked | Token został unieważniony i nie może być wykorzystywany do uwierzytelniania. |\n| Failed | Nie udało się aktywować tokena. Należy wygenerować nowy token, obecny nie może być wykorzystywany do uwierzytelniania. |\n"
  }



//---------------------------------------------------------------------------------------------------
request: "/api/v2/tokens?status={status}&description={description}&authorIdentifier={authorIdentifier}&authorIdentifierType={authorIdentifierType}&pageSize={pageSize}": get: text/plain
headers:
??x-continuation-token: {continuationToken}
Authentication: Bearer {securityToken}
body:
--- no body ---



response (200): application/json
{
  "continuationToken": "", // type: string; nullable: true; description: Token służący do pobrania kolejnej strony wyników. Jeśli jest pusty, to nie ma kolejnych stron.
  "tokens": [ // required; type: array; description: Lista tokenów uwierzytelniających.
    {
      "referenceNumber": "", // required; type: string; description: Numer referencyjny tokena.
      "authorIdentifier": { // required; type: object; items: #/components/schemas/TokenAuthorIdentifierTypeIdentifier; description: Identyfikator osoby która wygenerowała token.
        "type": "", // required; type: string; items: #/components/schemas/TokenAuthorIdentifierType; description: Typ identyfikatora.
| Wartość | Opis |
| --- | --- |
| Nip | NIP. |
| Pesel | PESEL. |
| Fingerprint | Odcisk palca certyfikatu. |
        "value": "" // required; type: string; description: Wartość identyfikatora.
      },
      "contextIdentifier": { // required; type: object; items: #/components/schemas/TokenContextIdentifierTypeIdentifier; description: Identyfikator kontekstu, w którym został wygenerowany token i do którego daje dostęp.
        "type": "", // required; type: string; items: #/components/schemas/TokenContextIdentifierType; description: Typ identyfikatora.
| Wartość | Opis |
| --- | --- |
| Nip | NIP. |
| InternalId | Identyfikator wewnętrzny. |
| NipVatUe | Dwuczłonowy identyfikator składający się z numeru NIP i numeru VAT-UE: `{nip}-{vat_ue}`. |
| PeppolId | Identyfikator dostawcy usług Peppol. |
        "value": "" // required; type: string; description: Wartość identyfikatora.
      },
      "description": "", // required; type: string; description: Opis tokena.
      "requestedPermissions": [ // required; type: array; description: Uprawnienia przypisane tokenowi.
      ],
      "dateCreated": "", // required; type: string; format: date-time; description: Data i czas utworzenia tokena.
      "lastUseDate": "", // type: string; format: date-time; nullable: true; description: Data ostatniego użycia tokena.
      "status": "", // required; type: string; items: #/components/schemas/AuthenticationTokenStatus; description: Status tokena.
| Wartość | Opis |
| --- | --- |
| Pending | Token został utworzony ale jest jeszcze w trakcie aktywacji i nadawania uprawnień. Nie może być jeszcze wykorzystywany do uwierzytelniania. |
| Active | Token jest aktywny i może być wykorzystywany do uwierzytelniania. |
| Revoking | Token jest w trakcie unieważniania. Nie może już być wykorzystywany do uwierzytelniania. |
| Revoked | Token został unieważniony i nie może być wykorzystywany do uwierzytelniania. |
| Failed | Nie udało się aktywować tokena. Należy wygenerować nowy token, obecny nie może być wykorzystywany do uwierzytelniania. |
      "statusDetails": [ // type: array; nullable: true; description: Dodatkowe informacje na temat statusu, zwracane w przypadku błędów.
      ]
    }
  ]
}
