//
// Endpoint: /api/v2/certificates/query
//
// Generated by OpenAPI_JSON_To_Single_Endpoint app.
// Author: Grzegorz Molenda.
// (C) 2025, All rights reserved.
// Released under MIT License.
//
  "/api/v2/certificates/query" : {
    "post" : {
      "tags" : [
        "Certyfikaty"
      ],
      "summary" : "Pobranie listy metadanych certyfikatów",
      "description" : "Zwraca listę certyfikatów spełniających podane kryteria wyszukiwania.\nW przypadku braku podania kryteriów wyszukiwania zwrócona zostanie nieprzefiltrowana lista.\n\n**Sortowanie:**\n\n- requestDate (Desc)\n\n",
      "parameters" : [
        {
          "name" : "pageSize",
          "in" : "query",
          "description" : "Rozmiar strony wyników",
          "schema" : {
            "maximum" : 50,
            "exclusiveMaximum" : false,
            "minimum" : 10,
            "exclusiveMinimum" : false,
            "type" : "integer",
            "format" : "int32",
            "default" : 10
          }
        },
        {
          "name" : "pageOffset",
          "in" : "query",
          "description" : "Numer strony wyników",
          "schema" : {
            "minimum" : 0,
            "exclusiveMinimum" : false,
            "type" : "integer",
            "format" : "int32",
            "default" : 0
          }
        }
      ],
      "requestBody" : {
        "description" : "Kryteria filtrowania",
        "content" : {
          "application/json" : {
            "schema" : {
              "allOf" : [
                {
                  "$ref" : "#/components/schemas/QueryCertificatesRequest"
                }
              ]
            },
            "example" : {
              "type" : "Offline",
              "status" : "Active"
            }
          }
        }
      },
      "responses" : {
        "200" : {
          "description" : "OK",
          "content" : {
            "application/json" : {
              "schema" : {
                "$ref" : "#/components/schemas/QueryCertificatesResponse"
              },
              "example" : {
                "certificates" : [
                  {
                    "certificateSerialNumber" : "018209160C631F1E",
                    "name" : "Certyfikat 1",
                    "type" : "Authentication",
                    "commonName" : "Jan Kowalski",
                    "status" : "Active",
                    "subjectIdentifier" : {
                      "type" : "Nip",
                      "value" : "1234445678"
                    },
                    "validFrom" : "2025-08-24T14:15:22+00:00",
                    "validTo" : "2027-08-24T14:15:22+00:00",
                    "lastUseDate" : "2025-08-25T14:15:22+00:00",
                    "requestDate" : "2025-08-24T14:15:22+00:00"
                  }
                ],
                "hasMore" : false
              }
            }
          }
        },
        "400" : {
          "description" : "| ExceptionCode | ExceptionDescription | Details |\n|-|-|-|\n| 21405 | Błąd walidacji danych wejściowych. | {treść błędu z walidatora} |",
          "content" : {
            "application/json" : {
              "schema" : {
                "$ref" : "#/components/schemas/ExceptionResponse"
              }
            }
          },
          "x-summary" : "Bad Request"
        },
        "401" : {
          "description" : "Unauthorized"
        }
      },
      "security" : [
        {
          "Bearer" : [

          ]
        }
      ],
      "x-sort" : [
        {
          "field" : "requestDate",
          "direction" : "Desc"
        }
      ]
    }
  }


  "QueryCertificatesRequest" : {
    "type" : "object",
    "properties" : {
      "certificateSerialNumber" : {
        "type" : "string",
        "description" : "Numer seryjny certyfikatu. Wyszukiwanie odbywa się na zasadzie dokładnego dopasowania (exact match).",
        "nullable" : true
      },
      "name" : {
        "type" : "string",
        "description" : "Nazwa własna certyfikatu. Wyszukiwanie jest częściowe, czyli zwracane są certyfikaty, których nazwa zawiera podany ciąg znaków (contains).",
        "nullable" : true
      },
      "type" : {
        "allOf" : [
          {
            "$ref" : "#/components/schemas/KsefCertificateType"
          }
        ],
        "description" : "Typ certyfikatu KSeF.\n| Wartość | Opis |\n| --- | --- |\n| Authentication | Certyfikat używany do uwierzytelnienia w systemie. |\n| Offline | Certyfikat używany wyłącznie do potwierdzania autentyczności wystawcy i integralności faktury w trybie offline |\n",
        "nullable" : true
      },
      "status" : {
        "allOf" : [
          {
            "$ref" : "#/components/schemas/CertificateListItemStatus"
          }
        ],
        "description" : "Status certyfikatu.\n| Wartość | Opis |\n| --- | --- |\n| Active | Certyfikat jest aktywny i może zostać użyty do uwierzytelnienia lub realizacji operacji w trybie offline (w zależności od typu certyfikatu). |\n| Blocked | Certyfikat został zablokowany i nie może zostać użyty do uwierzytelnienia i realizacji operacji w trybie offline.            Status przejściowy do czasu zakończenia procesu unieważniania. |\n| Revoked | Certyfikat został unieważniony i nie może zostać użyty do uwierzytelnienia i realizacji operacji w trybie offline. |\n| Expired | Certyfikat wygasł i nie może zostać użyty do uwierzytelnienia i realizacji operacji w trybie offline. |\n",
        "nullable" : true
      },
      "expiresAfter" : {
        "type" : "string",
        "description" : "Filtruje certyfikaty, które wygasają po podanej dacie.",
        "format" : "date-time",
        "nullable" : true
      }
    },
    "additionalProperties" : false
  }


  "KsefCertificateType" : {
    "enum" : [
      "Authentication",
      "Offline"
    ],
    "type" : "string",
    "description" : "| Wartość | Opis |\n| --- | --- |\n| Authentication | Certyfikat używany do uwierzytelnienia w systemie. |\n| Offline | Certyfikat używany wyłącznie do potwierdzania autentyczności wystawcy i integralności faktury w trybie offline |\n"
  }


  "CertificateListItemStatus" : {
    "enum" : [
      "Active",
      "Blocked",
      "Revoked",
      "Expired"
    ],
    "type" : "string",
    "description" : "| Wartość | Opis |\n| --- | --- |\n| Active | Certyfikat jest aktywny i może zostać użyty do uwierzytelnienia lub realizacji operacji w trybie offline (w zależności od typu certyfikatu). |\n| Blocked | Certyfikat został zablokowany i nie może zostać użyty do uwierzytelnienia i realizacji operacji w trybie offline.            Status przejściowy do czasu zakończenia procesu unieważniania. |\n| Revoked | Certyfikat został unieważniony i nie może zostać użyty do uwierzytelnienia i realizacji operacji w trybie offline. |\n| Expired | Certyfikat wygasł i nie może zostać użyty do uwierzytelnienia i realizacji operacji w trybie offline. |\n"
  }


  "QueryCertificatesResponse" : {
    "required" : [
      "certificates",
      "hasMore"
    ],
    "type" : "object",
    "properties" : {
      "certificates" : {
        "type" : "array",
        "items" : {
          "$ref" : "#/components/schemas/CertificateListItem"
        },
        "description" : "Lista certyfikatów spełniających kryteria wyszukiwania."
      },
      "hasMore" : {
        "type" : "boolean",
        "description" : "Flaga informująca o dostępności kolejnej strony wyników."
      }
    },
    "additionalProperties" : false
  }


  "CertificateListItem" : {
    "required" : [
      "certificateSerialNumber",
      "commonName",
      "name",
      "requestDate",
      "status",
      "subjectIdentifier",
      "type",
      "validFrom",
      "validTo"
    ],
    "type" : "object",
    "properties" : {
      "certificateSerialNumber" : {
        "type" : "string",
        "description" : "Numer seryjny certyfikatu (w formacie szesnastkowym)."
      },
      "name" : {
        "maxLength" : 100,
        "type" : "string",
        "description" : "Nazwa własna certyfikatu."
      },
      "type" : {
        "allOf" : [
          {
            "$ref" : "#/components/schemas/KsefCertificateType"
          }
        ],
        "description" : "Typ certyfikatu.\n| Wartość | Opis |\n| --- | --- |\n| Authentication | Certyfikat używany do uwierzytelnienia w systemie. |\n| Offline | Certyfikat używany wyłącznie do potwierdzania autentyczności wystawcy i integralności faktury w trybie offline |\n"
      },
      "commonName" : {
        "type" : "string",
        "description" : "Nazwa powszechna (CN) podmiotu, dla którego wystawiono certyfikat."
      },
      "status" : {
        "allOf" : [
          {
            "$ref" : "#/components/schemas/CertificateListItemStatus"
          }
        ],
        "description" : "Status certyfikatu.\n| Wartość | Opis |\n| --- | --- |\n| Active | Certyfikat jest aktywny i może zostać użyty do uwierzytelnienia lub realizacji operacji w trybie offline (w zależności od typu certyfikatu). |\n| Blocked | Certyfikat został zablokowany i nie może zostać użyty do uwierzytelnienia i realizacji operacji w trybie offline.            Status przejściowy do czasu zakończenia procesu unieważniania. |\n| Revoked | Certyfikat został unieważniony i nie może zostać użyty do uwierzytelnienia i realizacji operacji w trybie offline. |\n| Expired | Certyfikat wygasł i nie może zostać użyty do uwierzytelnienia i realizacji operacji w trybie offline. |\n"
      },
      "subjectIdentifier" : {
        "required" : [
          "type",
          "value"
        ],
        "allOf" : [
          {
            "$ref" : "#/components/schemas/CertificateSubjectIdentifier"
          }
        ],
        "description" : "Identyfikator podmiotu, dla którego wystawiono certyfikat."
      },
      "validFrom" : {
        "type" : "string",
        "description" : "Data rozpoczęcia ważności certyfikatu.",
        "format" : "date-time"
      },
      "validTo" : {
        "type" : "string",
        "description" : "Data wygaśnięcia certyfikatu.",
        "format" : "date-time"
      },
      "lastUseDate" : {
        "type" : "string",
        "description" : "Data ostatniego użycia certyfikatu.",
        "format" : "date-time",
        "nullable" : true
      },
      "requestDate" : {
        "type" : "string",
        "description" : "Data złożenia wniosku certyfikacyjnego.",
        "format" : "date-time"
      }
    },
    "additionalProperties" : false
  }


  "KsefCertificateType" : {
    "enum" : [
      "Authentication",
      "Offline"
    ],
    "type" : "string",
    "description" : "| Wartość | Opis |\n| --- | --- |\n| Authentication | Certyfikat używany do uwierzytelnienia w systemie. |\n| Offline | Certyfikat używany wyłącznie do potwierdzania autentyczności wystawcy i integralności faktury w trybie offline |\n"
  }


  "CertificateListItemStatus" : {
    "enum" : [
      "Active",
      "Blocked",
      "Revoked",
      "Expired"
    ],
    "type" : "string",
    "description" : "| Wartość | Opis |\n| --- | --- |\n| Active | Certyfikat jest aktywny i może zostać użyty do uwierzytelnienia lub realizacji operacji w trybie offline (w zależności od typu certyfikatu). |\n| Blocked | Certyfikat został zablokowany i nie może zostać użyty do uwierzytelnienia i realizacji operacji w trybie offline.            Status przejściowy do czasu zakończenia procesu unieważniania. |\n| Revoked | Certyfikat został unieważniony i nie może zostać użyty do uwierzytelnienia i realizacji operacji w trybie offline. |\n| Expired | Certyfikat wygasł i nie może zostać użyty do uwierzytelnienia i realizacji operacji w trybie offline. |\n"
  }


  "CertificateSubjectIdentifier" : {
    "required" : [
      "type",
      "value"
    ],
    "type" : "object",
    "properties" : {
      "type" : {
        "allOf" : [
          {
            "$ref" : "#/components/schemas/CertificateSubjectIdentifierType"
          }
        ],
        "description" : "Typ identyfikatora."
      },
      "value" : {
        "type" : "string",
        "description" : "Wartość identyfikatora."
      }
    },
    "additionalProperties" : false,
    "description" : "Identyfikator podmiotu dla którego wystawiono certyfikat.\n| Type | Value |\n| --- | --- |\n| Nip | 10 cyfrowy numer NIP |\n| Pesel | 11 cyfrowy numer PESEL |\n| Fingerprint | Odcisk palca certyfikatu |"
  }


  "CertificateSubjectIdentifierType" : {
    "enum" : [
      "Nip",
      "Pesel",
      "Fingerprint"
    ],
    "type" : "string"
  }



//---------------------------------------------------------------------------------------------------
request: "/api/v2/certificates/query?pageSize={pageSize}&pageOffset={pageOffset}": post: application/json
headers:
Authentication: Bearer {securityToken}
body:
{
  "certificateSerialNumber": "", // type: string; nullable: true; description: Numer seryjny certyfikatu. Wyszukiwanie odbywa się na zasadzie dokładnego dopasowania (exact match).
  "name": "", // type: string; nullable: true; description: Nazwa własna certyfikatu. Wyszukiwanie jest częściowe, czyli zwracane są certyfikaty, których nazwa zawiera podany ciąg znaków (contains).
  "type": "", // type: string; items: #/components/schemas/KsefCertificateType; description: Typ certyfikatu KSeF.
| Wartość | Opis |
| --- | --- |
| Authentication | Certyfikat używany do uwierzytelnienia w systemie. |
| Offline | Certyfikat używany wyłącznie do potwierdzania autentyczności wystawcy i integralności faktury w trybie offline |
  "status": "", // type: string; items: #/components/schemas/CertificateListItemStatus; description: Status certyfikatu.
| Wartość | Opis |
| --- | --- |
| Active | Certyfikat jest aktywny i może zostać użyty do uwierzytelnienia lub realizacji operacji w trybie offline (w zależności od typu certyfikatu). |
| Blocked | Certyfikat został zablokowany i nie może zostać użyty do uwierzytelnienia i realizacji operacji w trybie offline.            Status przejściowy do czasu zakończenia procesu unieważniania. |
| Revoked | Certyfikat został unieważniony i nie może zostać użyty do uwierzytelnienia i realizacji operacji w trybie offline. |
| Expired | Certyfikat wygasł i nie może zostać użyty do uwierzytelnienia i realizacji operacji w trybie offline. |
  "expiresAfter": "" // type: string; format: date-time; nullable: true; description: Filtruje certyfikaty, które wygasają po podanej dacie.
}



response (200): application/json
{
  "certificates": [ // required; type: array; description: Lista certyfikatów spełniających kryteria wyszukiwania.
    {
      "certificateSerialNumber": "", // required; type: string; description: Numer seryjny certyfikatu (w formacie szesnastkowym).
      "name": "", // required; type: string; description: Nazwa własna certyfikatu.
      "type": "", // required; type: string; items: #/components/schemas/KsefCertificateType; description: Typ certyfikatu.
| Wartość | Opis |
| --- | --- |
| Authentication | Certyfikat używany do uwierzytelnienia w systemie. |
| Offline | Certyfikat używany wyłącznie do potwierdzania autentyczności wystawcy i integralności faktury w trybie offline |
      "commonName": "", // required; type: string; description: Nazwa powszechna (CN) podmiotu, dla którego wystawiono certyfikat.
      "status": "", // required; type: string; items: #/components/schemas/CertificateListItemStatus; description: Status certyfikatu.
| Wartość | Opis |
| --- | --- |
| Active | Certyfikat jest aktywny i może zostać użyty do uwierzytelnienia lub realizacji operacji w trybie offline (w zależności od typu certyfikatu). |
| Blocked | Certyfikat został zablokowany i nie może zostać użyty do uwierzytelnienia i realizacji operacji w trybie offline.            Status przejściowy do czasu zakończenia procesu unieważniania. |
| Revoked | Certyfikat został unieważniony i nie może zostać użyty do uwierzytelnienia i realizacji operacji w trybie offline. |
| Expired | Certyfikat wygasł i nie może zostać użyty do uwierzytelnienia i realizacji operacji w trybie offline. |
      "subjectIdentifier": { // required; type: object; items: #/components/schemas/CertificateSubjectIdentifier; description: Identyfikator podmiotu, dla którego wystawiono certyfikat.
        "type": "", // required; type: string; items: #/components/schemas/CertificateSubjectIdentifierType; description: Typ identyfikatora.
        "value": "" // required; type: string; description: Wartość identyfikatora.
      },
      "validFrom": "", // required; type: string; format: date-time; description: Data rozpoczęcia ważności certyfikatu.
      "validTo": "", // required; type: string; format: date-time; description: Data wygaśnięcia certyfikatu.
      "lastUseDate": "", // type: string; format: date-time; nullable: true; description: Data ostatniego użycia certyfikatu.
      "requestDate": "" // required; type: string; format: date-time; description: Data złożenia wniosku certyfikacyjnego.
    }
  ],
  "hasMore": true/false // required; type: boolean; description: Flaga informująca o dostępności kolejnej strony wyników.
}
