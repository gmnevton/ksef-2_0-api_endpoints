//
// Endpoint: /api/v2/tokens/{referenceNumber}
//
// Generated by OpenAPI_JSON_To_Single_Endpoint app.
// Author: Grzegorz Molenda.
// (C) 2025, All rights reserved.
// Released under MIT License.
//
  "/api/v2/tokens/{referenceNumber}" : {
    "get" : {
      "tags" : [
        "Tokeny KSeF"
      ],
      "summary" : "Pobranie statusu tokena",
      "parameters" : [
        {
          "name" : "referenceNumber",
          "in" : "path",
          "description" : "Numer referencyjny tokena.",
          "required" : true,
          "schema" : {
            "type" : "string"
          }
        }
      ],
      "responses" : {
        "200" : {
          "description" : "OK",
          "content" : {
            "application/json" : {
              "schema" : {
                "$ref" : "#/components/schemas/TokenStatusResponse"
              },
              "example" : {
                "referenceNumber" : "20251001-EC-220B0CE000-E228129563-96",
                "authorIdentifier" : {
                  "type" : "Nip",
                  "value" : "7762811692"
                },
                "contextIdentifier" : {
                  "type" : "Nip",
                  "value" : "5265877635"
                },
                "description" : "Wystawianie i przeglądanie faktur.",
                "requestedPermissions" : [
                  "InvoiceWrite",
                  "InvoiceRead"
                ],
                "dateCreated" : "2025-07-11T12:23:56.0154302+00:00",
                "lastUseDate" : "2025-07-11T12:23:56.0154302+00:00",
                "status" : "Pending",
                "statusDetails" : [

                ]
              }
            }
          }
        },
        "400" : {
          "description" : "| ExceptionCode | ExceptionDescription | Details |\n|-|-|-|\n| 21405 | Błąd walidacji danych wejściowych. | {treść błędu z walidatora} |",
          "content" : {
            "application/json" : {
              "schema" : {
                "$ref" : "#/components/schemas/ExceptionResponse"
              }
            }
          },
          "x-summary" : "Bad Request"
        },
        "401" : {
          "description" : "Unauthorized"
        }
      },
      "security" : [
        {
          "Bearer" : [

          ]
        }
      ]
    },
    "delete" : {
      "tags" : [
        "Tokeny KSeF"
      ],
      "summary" : "Unieważnienie tokena",
      "description" : "Unieważniony token nie pozwoli już na uwierzytelnienie się za jego pomocą. Unieważnienie nie może zostać cofnięte.",
      "parameters" : [
        {
          "name" : "referenceNumber",
          "in" : "path",
          "description" : "Numer referencyjny tokena do unieważeniania.",
          "required" : true,
          "schema" : {
            "type" : "string"
          }
        }
      ],
      "responses" : {
        "204" : {
          "description" : "No Content"
        },
        "400" : {
          "description" : "| ExceptionCode | ExceptionDescription | Details |\n|-|-|-|\n| 21405 | Błąd walidacji danych wejściowych. | {treść błędu z walidatora} |",
          "content" : {
            "application/json" : {
              "schema" : {
                "$ref" : "#/components/schemas/ExceptionResponse"
              }
            }
          },
          "x-summary" : "Bad Request"
        },
        "401" : {
          "description" : "Unauthorized"
        }
      },
      "security" : [
        {
          "Bearer" : [

          ]
        }
      ]
    }
  }


  "TokenStatusResponse" : {
    "required" : [
      "authorIdentifier",
      "contextIdentifier",
      "dateCreated",
      "description",
      "referenceNumber",
      "requestedPermissions",
      "status"
    ],
    "type" : "object",
    "properties" : {
      "referenceNumber" : {
        "type" : "string",
        "description" : "Numer referencyjny tokena."
      },
      "authorIdentifier" : {
        "required" : [
          "type",
          "value"
        ],
        "allOf" : [
          {
            "$ref" : "#/components/schemas/TokenAuthorIdentifierTypeIdentifier"
          }
        ],
        "description" : "Identyfikator osoby która wygenerowała token."
      },
      "contextIdentifier" : {
        "required" : [
          "type",
          "value"
        ],
        "allOf" : [
          {
            "$ref" : "#/components/schemas/TokenContextIdentifierTypeIdentifier"
          }
        ],
        "description" : "Identyfikator kontekstu, w którym został wygenerowany token i do którego daje dostęp."
      },
      "description" : {
        "type" : "string",
        "description" : "Opis tokena."
      },
      "requestedPermissions" : {
        "type" : "array",
        "items" : {
          "$ref" : "#/components/schemas/TokenPermissionType"
        },
        "description" : "Uprawnienia przypisane tokenowi."
      },
      "dateCreated" : {
        "type" : "string",
        "description" : "Data i czas utworzenia tokena.",
        "format" : "date-time"
      },
      "lastUseDate" : {
        "type" : "string",
        "description" : "Data ostatniego użycia tokena.",
        "format" : "date-time",
        "nullable" : true
      },
      "status" : {
        "allOf" : [
          {
            "$ref" : "#/components/schemas/AuthenticationTokenStatus"
          }
        ],
        "description" : "Status tokena.\n| Wartość | Opis |\n| --- | --- |\n| Pending | Token został utworzony ale jest jeszcze w trakcie aktywacji i nadawania uprawnień. Nie może być jeszcze wykorzystywany do uwierzytelniania. |\n| Active | Token jest aktywny i może być wykorzystywany do uwierzytelniania. |\n| Revoking | Token jest w trakcie unieważniania. Nie może już być wykorzystywany do uwierzytelniania. |\n| Revoked | Token został unieważniony i nie może być wykorzystywany do uwierzytelniania. |\n| Failed | Nie udało się aktywować tokena. Należy wygenerować nowy token, obecny nie może być wykorzystywany do uwierzytelniania. |\n"
      },
      "statusDetails" : {
        "type" : "array",
        "items" : {
          "type" : "string"
        },
        "description" : "Dodatkowe informacje na temat statusu, zwracane w przypadku błędów.",
        "nullable" : true
      }
    },
    "additionalProperties" : false
  }


  "TokenAuthorIdentifierTypeIdentifier" : {
    "required" : [
      "type",
      "value"
    ],
    "type" : "object",
    "properties" : {
      "type" : {
        "allOf" : [
          {
            "$ref" : "#/components/schemas/TokenAuthorIdentifierType"
          }
        ],
        "description" : "Typ identyfikatora.\n| Wartość | Opis |\n| --- | --- |\n| Nip | NIP. |\n| Pesel | PESEL. |\n| Fingerprint | Odcisk palca certyfikatu. |\n"
      },
      "value" : {
        "type" : "string",
        "description" : "Wartość identyfikatora."
      }
    },
    "additionalProperties" : false
  }


  "TokenAuthorIdentifierType" : {
    "enum" : [
      "Nip",
      "Pesel",
      "Fingerprint"
    ],
    "type" : "string",
    "description" : "| Wartość | Opis |\n| --- | --- |\n| Nip | NIP. |\n| Pesel | PESEL. |\n| Fingerprint | Odcisk palca certyfikatu. |\n"
  }


  "TokenContextIdentifierTypeIdentifier" : {
    "required" : [
      "type",
      "value"
    ],
    "type" : "object",
    "properties" : {
      "type" : {
        "allOf" : [
          {
            "$ref" : "#/components/schemas/TokenContextIdentifierType"
          }
        ],
        "description" : "Typ identyfikatora.\n| Wartość | Opis |\n| --- | --- |\n| Nip | NIP. |\n| InternalId | Identyfikator wewnętrzny. |\n| NipVatUe | Dwuczłonowy identyfikator składający się z numeru NIP i numeru VAT-UE: `{nip}-{vat_ue}`. |\n| PeppolId | Identyfikator dostawcy usług Peppol. |\n"
      },
      "value" : {
        "type" : "string",
        "description" : "Wartość identyfikatora."
      }
    },
    "additionalProperties" : false
  }


  "TokenContextIdentifierType" : {
    "enum" : [
      "Nip",
      "InternalId",
      "NipVatUe",
      "PeppolId"
    ],
    "type" : "string",
    "description" : "| Wartość | Opis |\n| --- | --- |\n| Nip | NIP. |\n| InternalId | Identyfikator wewnętrzny. |\n| NipVatUe | Dwuczłonowy identyfikator składający się z numeru NIP i numeru VAT-UE: `{nip}-{vat_ue}`. |\n| PeppolId | Identyfikator dostawcy usług Peppol. |\n"
  }


  "TokenPermissionType" : {
    "enum" : [
      "InvoiceRead",
      "InvoiceWrite",
      "CredentialsRead",
      "CredentialsManage",
      "SubunitManage",
      "EnforcementOperations"
    ],
    "type" : "string"
  }


  "AuthenticationTokenStatus" : {
    "enum" : [
      "Pending",
      "Active",
      "Revoking",
      "Revoked",
      "Failed"
    ],
    "type" : "string",
    "description" : "| Wartość | Opis |\n| --- | --- |\n| Pending | Token został utworzony ale jest jeszcze w trakcie aktywacji i nadawania uprawnień. Nie może być jeszcze wykorzystywany do uwierzytelniania. |\n| Active | Token jest aktywny i może być wykorzystywany do uwierzytelniania. |\n| Revoking | Token jest w trakcie unieważniania. Nie może już być wykorzystywany do uwierzytelniania. |\n| Revoked | Token został unieważniony i nie może być wykorzystywany do uwierzytelniania. |\n| Failed | Nie udało się aktywować tokena. Należy wygenerować nowy token, obecny nie może być wykorzystywany do uwierzytelniania. |\n"
  }



//---------------------------------------------------------------------------------------------------
request: "/api/v2/tokens/{referenceNumber}": get: text/plain
headers:
Authentication: Bearer {securityToken}
body:
--- no body ---



response (200): application/json
{
  "referenceNumber": "", // required; type: string; description: Numer referencyjny tokena.
  "authorIdentifier": { // required; type: object; items: #/components/schemas/TokenAuthorIdentifierTypeIdentifier; description: Identyfikator osoby która wygenerowała token.
    "type": "", // required; type: string; items: #/components/schemas/TokenAuthorIdentifierType; description: Typ identyfikatora.
| Wartość | Opis |
| --- | --- |
| Nip | NIP. |
| Pesel | PESEL. |
| Fingerprint | Odcisk palca certyfikatu. |
    "value": "" // required; type: string; description: Wartość identyfikatora.
  },
  "contextIdentifier": { // required; type: object; items: #/components/schemas/TokenContextIdentifierTypeIdentifier; description: Identyfikator kontekstu, w którym został wygenerowany token i do którego daje dostęp.
    "type": "", // required; type: string; items: #/components/schemas/TokenContextIdentifierType; description: Typ identyfikatora.
| Wartość | Opis |
| --- | --- |
| Nip | NIP. |
| InternalId | Identyfikator wewnętrzny. |
| NipVatUe | Dwuczłonowy identyfikator składający się z numeru NIP i numeru VAT-UE: `{nip}-{vat_ue}`. |
| PeppolId | Identyfikator dostawcy usług Peppol. |
    "value": "" // required; type: string; description: Wartość identyfikatora.
  },
  "description": "", // required; type: string; description: Opis tokena.
  "requestedPermissions": [ // required; type: array; description: Uprawnienia przypisane tokenowi.
  ],
  "dateCreated": "", // required; type: string; format: date-time; description: Data i czas utworzenia tokena.
  "lastUseDate": "", // type: string; format: date-time; nullable: true; description: Data ostatniego użycia tokena.
  "status": "", // required; type: string; items: #/components/schemas/AuthenticationTokenStatus; description: Status tokena.
| Wartość | Opis |
| --- | --- |
| Pending | Token został utworzony ale jest jeszcze w trakcie aktywacji i nadawania uprawnień. Nie może być jeszcze wykorzystywany do uwierzytelniania. |
| Active | Token jest aktywny i może być wykorzystywany do uwierzytelniania. |
| Revoking | Token jest w trakcie unieważniania. Nie może już być wykorzystywany do uwierzytelniania. |
| Revoked | Token został unieważniony i nie może być wykorzystywany do uwierzytelniania. |
| Failed | Nie udało się aktywować tokena. Należy wygenerować nowy token, obecny nie może być wykorzystywany do uwierzytelniania. |
  "statusDetails": [ // type: array; nullable: true; description: Dodatkowe informacje na temat statusu, zwracane w przypadku błędów.
  ]
}



//---------------------------------------------------------------------------------------------------
request: "/api/v2/tokens/{referenceNumber}": delete: text/plain
headers:
Authentication: Bearer {securityToken}
body:
--- no body ---



response (204):
