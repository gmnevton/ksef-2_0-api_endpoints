//
// Endpoint: /api/v2/certificates/enrollments
//
// Generated by OpenAPI_JSON_To_Single_Endpoint app.
// Author: Grzegorz Molenda.
// (C) 2025, All rights reserved.
// Released under MIT License.
//
  "/api/v2/certificates/enrollments" : {
    "post" : {
      "tags" : [
        "Certyfikaty"
      ],
      "summary" : "Wysyłka wniosku certyfikacyjnego",
      "description" : "Przyjmuje wniosek certyfikacyjny i rozpoczyna jego przetwarzanie.\n\nDozwolone typy kluczy prywatnych:\n- RSA (OID: 1.2.840.113549.1.1.1), długość klucza równa 2048 bitów,\n- EC (klucze oparte na krzywych eliptycznych, OID: 1.2.840.10045.2.1), krzywa NIST P-256 (secp256r1)\n\nZalecane jest stosowanie kluczy EC.\n\nDozwolone algorytmy podpisu:\n- RSA PKCS#1 v1.5,\n- RSA PSS,\n- ECDSA (format podpisu zgodny z RFC 3279)\n\nDozwolone funkcje skrótu użyte do podpisu CSR:\n- SHA1,\n- SHA256,\n- SHA384,\n- SHA512\n\n> Więcej informacji:\n> - [Wysłanie wniosku certyfikacyjnego](https://github.com/CIRFMF/ksef-docs/blob/main/certyfikaty-KSeF.md#4-wys%C5%82anie-wniosku-certyfikacyjnego)",
      "requestBody" : {
        "description" : "",
        "content" : {
          "application/json" : {
            "schema" : {
              "required" : [
                "certificateName",
                "certificateType",
                "csr"
              ],
              "allOf" : [
                {
                  "$ref" : "#/components/schemas/EnrollCertificateRequest"
                }
              ]
            },
            "example" : {
              "certificateName" : "Certyfikat-Auth-004",
              "certificateType" : "Authentication",
              "csr" : "MIIDJjCCAd4CAQAwgbAxIjAgBgNVBAMMGUZpcm1hIEtvd2Fsc2tpIENlcnR5ZmlrYXQxIjAgBgNVBAoMGUZpcm1hIEtvd2Fsc2tpIFNwLiB6IG8uby4xEzARBgNVBGEMCjc3NjI4MTE2OTIxCzAJBgNVBAYTAlBMMRUwEwYDVQQFEwxBQkMxMjM0NTY3ODkxLTArBgNVBC0MJGQ5ZDIyNzI0LTQ2OTYtNDYwYy05ZTVlLWI5ZTNhYWZiMGFmMzCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBANZC1hJiB4ZBsxGy/a4yvtOUP0HQxDt7EUZrfKO78+cmI7KCO9aW96yr6O0R928/Y9vmymbgh6KvMUTzZZj24uyxar849O1laor5t8Wv63RDx/I4+9Rt7w+QPPofmpenOokJH+Fm+FDQwo2l07o8SppGfaZpvMak+cDSrh+73wfM37fvPImr9p4ckzzxA9q6f4uoqGqcGSDlSwRjfLQKzWZaEklpZBpY4jeCh54uN3+YLsMQYKdcIbW0Jart1UbwMd/wbHfzFhVmPGOAMMpwVEBw6E4A0CTWIiAX3Alqbx4+IkuqC+gEs3ETTec7eOqhxe9V9cywi7WR+Mz6JO6DJcUCAwEAAaAAMD0GCSqGSIb3DQEBCjAwoA0wCwYJYIZIAWUDBAIBoRowGAYJKoZIhvcNAQEIMAsGCWCGSAFlAwQCAaIDAgEgA4IBAQCJhtF2/2E+JmkWitE/BGbm3NU4fIxr1Z+w0UnHsP+F8n9UDwAnuncG1GH5wZFervldEMooegzEDnYaqxnEUnbZ4wxeAHqpbTZjOOfqrk7o0r66+mXUs5NnyD4M3j3ig98GcvhEdbcNH+RsIwi7FaLNXnOE4SLYL9KvW0geriywWjS+5MmA0Gcn1e4vCD6FeEls8EHzkhrWE+rUsoM5zT2a0OPNXG3fScyOqOZe+OdjT4Y7ScRGy711u3v2X9RoTqQUDfCJ3cob/KRcrzvs1TQVazGZPfcIa6an6SigUvZ7XAMHlUTyOeM4AwKqiEqQ0qfe/HhlDylgZSwulb9u0utT",
              "validFrom" : "2025-08-28T09:22:13.388+00:00"
            }
          }
        }
      },
      "responses" : {
        "202" : {
          "description" : "Accepted",
          "content" : {
            "application/json" : {
              "schema" : {
                "$ref" : "#/components/schemas/EnrollCertificateResponse"
              },
              "example" : {
                "referenceNumber" : "20251010-EH-1B6C9EB000-4B15D3AEB9-89",
                "timestamp" : "2025-10-11T12:23:56.0154302+00:00"
              }
            }
          }
        },
        "400" : {
          "description" : "| ExceptionCode       | ExceptionDescription                                                                           | Details |\n|---------------------|------------------------------------------------------------------------------------------------|---------|\n| 25002               | Brak możliwości złożenia wniosku certyfikacyjnego dla wykorzystanego sposobu uwierzytelnienia. |         |\n| 25003               | Dane w CSR nie zgadzają się z danymi w użytym wektorze uwierzytelniającym.                     |         |\n| 25004               | Niepoprawny format CSR lub niepoprawny podpis CSR.                                             |         |\n| 25006               | Osiągnięto limit możliwych do złożenia wniosków certyfikacyjnych.                              |         |\n| 25007               | Osiągnięto limit dopuszczalnej liczby posiadanych certyfikatów.                                |         |\n| 25010               | Nieprawidłowy typ lub długość klucza.                                                          |         |\n| 25011               | Nieprawidłowy algorytm podpisu CSR.                                                            |         |\n| 21405 | Błąd walidacji danych wejściowych. | {treść błędu z walidatora} |",
          "content" : {
            "application/json" : {
              "schema" : {
                "$ref" : "#/components/schemas/ExceptionResponse"
              }
            }
          },
          "x-summary" : "Bad Request"
        },
        "401" : {
          "description" : "Unauthorized"
        }
      },
      "security" : [
        {
          "Bearer" : [

          ]
        }
      ]
    }
  }


  "EnrollCertificateRequest" : {
    "required" : [
      "certificateName",
      "certificateType",
      "csr"
    ],
    "type" : "object",
    "properties" : {
      "certificateName" : {
        "type" : "string",
        "description" : "Nazwa własna certyfikatu."
      },
      "certificateType" : {
        "allOf" : [
          {
            "$ref" : "#/components/schemas/KsefCertificateType"
          }
        ],
        "description" : "Typ certyfikatu.\n| Wartość | Opis |\n| --- | --- |\n| Authentication | Certyfikat używany do uwierzytelnienia w systemie. |\n| Offline | Certyfikat używany wyłącznie do potwierdzania autentyczności wystawcy i integralności faktury w trybie offline |\n"
      },
      "csr" : {
        "type" : "string",
        "description" : "Wniosek certyfikacyjny PKCS#10 (CSR) w formacie DER zakodowany w Base64.",
        "format" : "byte"
      },
      "validFrom" : {
        "type" : "string",
        "description" : "Data rozpoczęcia ważności certyfikatu.\nJeśli nie zostanie podana, certyfikat będzie ważny od momentu jego wystawienia.",
        "format" : "date-time",
        "nullable" : true
      }
    },
    "additionalProperties" : false
  }


  "KsefCertificateType" : {
    "enum" : [
      "Authentication",
      "Offline"
    ],
    "type" : "string",
    "description" : "| Wartość | Opis |\n| --- | --- |\n| Authentication | Certyfikat używany do uwierzytelnienia w systemie. |\n| Offline | Certyfikat używany wyłącznie do potwierdzania autentyczności wystawcy i integralności faktury w trybie offline |\n"
  }


  "EnrollCertificateResponse" : {
    "required" : [
      "referenceNumber",
      "timestamp"
    ],
    "type" : "object",
    "properties" : {
      "referenceNumber" : {
        "type" : "string",
        "description" : "Numer referencyjny operacji przetwarzania wniosku certyfikacyjnego."
      },
      "timestamp" : {
        "type" : "string",
        "description" : "Data złożenia wniosku certyfikacyjnego.",
        "format" : "date-time"
      }
    },
    "additionalProperties" : false
  }



//---------------------------------------------------------------------------------------------------
request: "/api/v2/certificates/enrollments": post: application/json
headers:
Authentication: Bearer {securityToken}
body:
{
  "certificateName": "", // required; type: string; description: Nazwa własna certyfikatu.
  "certificateType": "", // required; type: string; items: #/components/schemas/KsefCertificateType; description: Typ certyfikatu.
| Wartość | Opis |
| --- | --- |
| Authentication | Certyfikat używany do uwierzytelnienia w systemie. |
| Offline | Certyfikat używany wyłącznie do potwierdzania autentyczności wystawcy i integralności faktury w trybie offline |
  "csr": "", // required; type: string; format: byte; description: Wniosek certyfikacyjny PKCS#10 (CSR) w formacie DER zakodowany w Base64.
  "validFrom": "" // type: string; format: date-time; nullable: true; description: Data rozpoczęcia ważności certyfikatu.
Jeśli nie zostanie podana, certyfikat będzie ważny od momentu jego wystawienia.
}



response (202): application/json
{
  "referenceNumber": "", // required; type: string; description: Numer referencyjny operacji przetwarzania wniosku certyfikacyjnego.
  "timestamp": "" // required; type: string; format: date-time; description: Data złożenia wniosku certyfikacyjnego.
}
